{"ast":null,"code":"import { CompactSign } from '../jws/compact/sign.js';\nimport { JWTInvalid } from '../util/errors.js';\nimport { encoder } from '../lib/buffer_utils.js';\nimport { ProduceJWT } from './produce.js';\nexport class SignJWT extends ProduceJWT {\n  setProtectedHeader(protectedHeader) {\n    this._protectedHeader = protectedHeader;\n    return this;\n  }\n  async sign(key, options) {\n    const sig = new CompactSign(encoder.encode(JSON.stringify(this._payload)));\n    sig.setProtectedHeader(this._protectedHeader);\n    if (Array.isArray(this._protectedHeader?.crit) && this._protectedHeader.crit.includes('b64') && this._protectedHeader.b64 === false) {\n      throw new JWTInvalid('JWTs MUST NOT use unencoded payload');\n    }\n    return sig.sign(key, options);\n  }\n}","map":{"version":3,"names":["CompactSign","JWTInvalid","encoder","ProduceJWT","SignJWT","setProtectedHeader","protectedHeader","_protectedHeader","sign","key","options","sig","encode","JSON","stringify","_payload","Array","isArray","crit","includes","b64"],"sources":["/home/kishan/NewBackEnd/frontend/node_modules/jose/dist/browser/jwt/sign.js"],"sourcesContent":["import { CompactSign } from '../jws/compact/sign.js';\nimport { JWTInvalid } from '../util/errors.js';\nimport { encoder } from '../lib/buffer_utils.js';\nimport { ProduceJWT } from './produce.js';\nexport class SignJWT extends ProduceJWT {\n    setProtectedHeader(protectedHeader) {\n        this._protectedHeader = protectedHeader;\n        return this;\n    }\n    async sign(key, options) {\n        const sig = new CompactSign(encoder.encode(JSON.stringify(this._payload)));\n        sig.setProtectedHeader(this._protectedHeader);\n        if (Array.isArray(this._protectedHeader?.crit) &&\n            this._protectedHeader.crit.includes('b64') &&\n            this._protectedHeader.b64 === false) {\n            throw new JWTInvalid('JWTs MUST NOT use unencoded payload');\n        }\n        return sig.sign(key, options);\n    }\n}\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,wBAAwB;AACpD,SAASC,UAAU,QAAQ,mBAAmB;AAC9C,SAASC,OAAO,QAAQ,wBAAwB;AAChD,SAASC,UAAU,QAAQ,cAAc;AACzC,OAAO,MAAMC,OAAO,SAASD,UAAU,CAAC;EACpCE,kBAAkBA,CAACC,eAAe,EAAE;IAChC,IAAI,CAACC,gBAAgB,GAAGD,eAAe;IACvC,OAAO,IAAI;EACf;EACA,MAAME,IAAIA,CAACC,GAAG,EAAEC,OAAO,EAAE;IACrB,MAAMC,GAAG,GAAG,IAAIX,WAAW,CAACE,OAAO,CAACU,MAAM,CAACC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACC,QAAQ,CAAC,CAAC,CAAC;IAC1EJ,GAAG,CAACN,kBAAkB,CAAC,IAAI,CAACE,gBAAgB,CAAC;IAC7C,IAAIS,KAAK,CAACC,OAAO,CAAC,IAAI,CAACV,gBAAgB,EAAEW,IAAI,CAAC,IAC1C,IAAI,CAACX,gBAAgB,CAACW,IAAI,CAACC,QAAQ,CAAC,KAAK,CAAC,IAC1C,IAAI,CAACZ,gBAAgB,CAACa,GAAG,KAAK,KAAK,EAAE;MACrC,MAAM,IAAInB,UAAU,CAAC,qCAAqC,CAAC;IAC/D;IACA,OAAOU,GAAG,CAACH,IAAI,CAACC,GAAG,EAAEC,OAAO,CAAC;EACjC;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}